{"version":3,"sources":["request/api.js","utils/util.js","pages/events/components/Item.js","pages/events/List.js"],"names":["HOST","request","path","param","Promise","resolve","reject","fullUrl","parseTpl","serializeJson","client_id","client_secret","fetch","then","r","text","res","JSON","parse","message","error","catch","err","getUser","getRepos","getFollowing","getFollowers","getInfo","getRepoDetail","getEvents","template","context","replace","match","key","trim","json","Object","entries","map","item","join","cutStr","val","length","substr","Item","itemInfo","this","props","type","actor","payload","repo","dot","PushEvent","theme","WatchEvent","twoToneColor","CreateEvent","IssuesEvent","IssueCommentEvent","CommitCommentEvent","PullRequestEvent","ForkEvent","href","display_login","target","rel","commits","name","issue","html_url","user","login","comment","pull_request","state","release","className","format","created_at","React","Component","List","list","componentDidMount","getList","api","username","ls","get","data","setState","concat","style","margin","fontSize","id"],"mappings":"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","file":"static/js/10.2ea5095c.chunk.js","sourcesContent":["import { parseTpl, serializeJson } from '@/utils/util';\nimport {\n    message\n} from 'antd';\nconst HOST = 'https://api.github.com';\n\nfunction request(path, param) {\n    return new Promise((resolve, reject) => {\n        let fullUrl = parseTpl(HOST + path, param);\n        fullUrl = fullUrl + '?' + serializeJson({\n            ...param,\n            client_id: 'aa18248a5e12eca15a6f',\n            client_secret: '389eac9e777a6ced5127b45193640580174c426d'\n        })\n        fetch(fullUrl).then(r => r.text().then(res => {\n            res = JSON.parse(res);\n            if (res.message) {\n                message.error(res.message || '接口出错');\n            }\n            resolve(res);\n        })).catch(err => {\n            reject(err);\n        });\n    });\n}\n\nexport default {\n    getUser(param) {\n        return request('/users/{{username}}', param);\n    },\n\n    getRepos(param) {\n        return request('/users/{{username}}/repos', param);\n    },\n\n    getFollowing(param) {\n        return request('/users/{{username}}/following', param);\n    },\n\n    getFollowers(param) {\n        return request('/users/{{username}}/followers', param);\n    },\n\n    getInfo(param) {\n        return request('/users/{{username}}', param);\n    },\n\n    getRepoDetail(param) {\n        return request('/repos/{{username}}/{{repo}}', param);\n    },\n\n    getEvents(param) {\n        return request('/users/{{username}}/events', param);\n    }\n};","export const parseTpl = (template, context) => {\n    return template.replace(/\\{\\{(.*?)\\}\\}/g, (match, key) => context[key.trim()]);\n}\n\nexport const serializeJson = (json) => {\n    return Object.entries(json).map(item => {\n        return `${item[0]}=${item[1]}`\n    }).join('&')\n}\n\nexport const cutStr = (val, length = 30) => {\n    if (val && val.length > length) {\n        return `${val.substr(0, length)}...`;\n    }\n    return val;\n}","import React from 'react';\nimport {\n    Timeline,\n    Icon,\n    Tag\n} from 'antd';\nimport { format } from 'timeago.js';\nimport './item.scss'\n\nexport default class Item extends React.Component {\n    render() {\n        const itemInfo = this.props.itemInfo;\n        const {\n            type,\n            actor,\n            payload,\n            repo,\n        } = itemInfo;\n        const dot = {\n            PushEvent: <Icon type=\"smile\" theme=\"twoTone\" />,\n            WatchEvent: <Icon type=\"heart\" theme=\"twoTone\" twoToneColor=\"#eb2f96\" />,\n            CreateEvent: <Icon type=\"check-circle\" theme=\"twoTone\" twoToneColor=\"#52c41a\" />,\n            IssuesEvent: <Icon type=\"form\" />,\n            IssueCommentEvent: <Icon type=\"interaction\" />,\n            CommitCommentEvent: <Icon type=\"form\" />,\n            PullRequestEvent: <Icon type=\"cloud-upload\" />,\n            ForkEvent: <Icon type=\"fork\" />,\n        }[type] || '';\n        return (\n            <Timeline.Item dot={dot}>\n                <span>\n                    <a href={`https://github.com/${actor.display_login}`} target=\"_blank\" rel=\"noopener noreferrer\">{actor.display_login}</a>\n                    &nbsp;\n                </span>\n                {\n                    type === 'PushEvent' &&\n                    <span>\n                        created {payload.commits.length} commits in repository &nbsp;\n                        <a href={`https://github.com/${repo.name}`} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'WatchEvent' &&\n                    <span>\n                        starred repository &nbsp;\n                        <a href={`https://github.com/${repo.name}`} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'CreateEvent' &&\n                    <span>\n                        created a repository &nbsp;\n                        <a href={`https://github.com/${repo.name}`} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'IssuesEvent' &&\n                    <span>\n                        opened an &nbsp;\n                        <a href={payload.issue.html_url} target=\"_blank\" rel=\"noopener noreferrer\">issue</a>\n                        &nbsp; in &nbsp;\n                        <a href={`https://github.com/${repo.name}`} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'IssueCommentEvent' &&\n                    <span>\n                        commented  &nbsp; \n                        <a href={`https://github.com/${payload.issue.user.login}`} target=\"_blank\" rel=\"noopener noreferrer\">{payload.issue.user.login}</a> \n                        &nbsp; in &nbsp;\n                        <a href={payload.comment.html_url} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'CommitCommentEvent' &&\n                    <span>\n                        commited a commented in &nbsp;\n                        <a href={payload.comment.html_url} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'PullRequestEvent' &&\n                    <span>\n                        pulled requests <Tag>{payload.pull_request.state}</Tag>\n                        in &nbsp;\n                        <a href={payload.pull_request.html_url} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'ForkEvent' &&\n                    <span>\n                        forked &nbsp;\n                        <a href={`https://github.com/${repo.name}`} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n                {\n                    type === 'ReleaseEvent' &&\n                    <span>\n                        published &nbsp;\n                        <a href={payload.release.html_url} target=\"_blank\" rel=\"noopener noreferrer\">{repo.name}</a>\n                    </span>\n                }\n\n                <span className=\"time\">{format(itemInfo.created_at)}</span>\n            </Timeline.Item>\n        )\n    }\n}\n","\nimport React from 'react';\nimport Item from './components/Item';\nimport api from '@api';\nimport '@style/pages/common.scss';\nimport {\n    Timeline\n} from 'antd';\nimport { ls } from '@utils/localStorage';\n\nexport default class List extends React.Component {\n    state = {\n        list: []\n    }\n\n    componentDidMount = () => {\n        this.getList();\n    }\n\n    async getList() {\n        const data = await api.getEvents({\n            username: ls.get('my_github_app_username'),\n        });\n        this.setState({\n            list: this.state.list.concat(data)\n        });\n    }\n\n    render() {\n        const { list } = this.state;\n        const username = ls.get('my_github_app_username');\n        return (\n            <div className=\"events\">\n                <h2 style={{ margin: 20, fontSize: 20 }}>\n                    What happened to &nbsp;\n                    <a href={`https://github.com/${username}`} target=\"_blank\" rel=\"noopener noreferrer\">{username}</a>\n                    &nbsp; rencently ?\n                </h2>\n                <Timeline>\n                    {list.map(item => (\n                        <Item itemInfo={item} key={item.id}></Item>\n                    ))}\n                </Timeline>\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}