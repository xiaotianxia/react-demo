(this["webpackJsonpreact-demo"]=this["webpackJsonpreact-demo"]||[]).push([[8],{184:function(e,t,a){"use strict";var n=a(55),r=a(185),o=a(332),c=a(42),i="https://api.github.com";function s(e,t){return c.a.get("my_github_app_username")||(window.location.href="/#/login"),new Promise((function(a,c){var s=Object(r.b)(i+e,t);s=s+"?"+Object(r.c)(Object(n.a)({},t,{client_id:"aa18248a5e12eca15a6f",client_secret:"389eac9e777a6ced5127b45193640580174c426d"})),fetch(s).then((function(e){return e.text().then((function(e){(e=JSON.parse(e)).message&&o.a.error(e.message||"\u63a5\u53e3\u51fa\u9519"),a(e)}))})).catch((function(e){c(e)}))}))}t.a={getUser:function(e){return s("/users/{{username}}",e)},getRepos:function(e){return s("/users/{{username}}/repos",e)},getFollowing:function(e){return s("/users/{{username}}/following",e)},getFollowers:function(e){return s("/users/{{username}}/followers",e)},getInfo:function(e){return s("/users/{{username}}",e)},getRepoDetail:function(e){return s("/repos/{{username}}/{{repo}}",e)},getEvents:function(e){return s("/users/{{username}}/events",e)}}},185:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o}));var n=function(e,t){return e.replace(/\{\{(.*?)\}\}/g,(function(e,a){return t[a.trim()]}))},r=function(e){return Object.entries(e).map((function(e){return"".concat(e[0],"=").concat(e[1])})).join("&")},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e&&e.length>t?"".concat(e.substr(0,t),"..."):e}},187:function(e,t,a){},202:function(e,t,a){},204:function(e,t,a){"use strict";var n=a(186),r=a.n(n),o=a(55),c=a(81),i=a(82),s=a(84),l=a(83),u=a(85),p=a(0),f=a.n(p),m=a(86),h=a(329),g=a(181),b=a(8),d=a.n(b),y=a(178);function v(e){return(v="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function j(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return!t||"object"!==v(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=w(this,S(t).apply(this,arguments))).state={scale:1,mounted:!1,isImgExist:!0},e.setScale=function(){if(e.avatarChildren&&e.avatarNode){var t=e.avatarChildren.offsetWidth,a=e.avatarNode.offsetWidth;0===t||0===a||e.lastChildrenWidth===t&&e.lastNodeWidth===a||(e.lastChildrenWidth=t,e.lastNodeWidth=a,e.setState({scale:a-8<t?(a-8)/t:1}))}},e.handleImgLoadError=function(){var t=e.props.onError;!1!==(t?t():void 0)&&e.setState({isImgExist:!1})},e.renderAvatar=function(t){var a,n,r=t.getPrefixCls,o=e.props,c=o.prefixCls,i=o.shape,s=o.size,l=o.src,u=o.srcSet,f=o.icon,h=o.className,g=o.alt,b=_(o,["prefixCls","shape","size","src","srcSet","icon","className","alt"]),y=e.state,v=y.isImgExist,j=y.scale,w=(y.mounted,r("avatar",c)),S=d()((O(a={},"".concat(w,"-lg"),"large"===s),O(a,"".concat(w,"-sm"),"small"===s),a)),P=d()(w,h,S,(O(n={},"".concat(w,"-").concat(i),i),O(n,"".concat(w,"-image"),l&&v),O(n,"".concat(w,"-icon"),f),n)),C="number"===typeof s?{width:s,height:s,lineHeight:"".concat(s,"px"),fontSize:f?s/2:18}:{},k=e.props.children;if(l&&v)k=p.createElement("img",{src:l,srcSet:u,onError:e.handleImgLoadError,alt:g});else if(f)k="string"===typeof f?p.createElement(m.a,{type:f}):f;else{if(e.avatarChildren||1!==j){var N="scale(".concat(j,") translateX(-50%)"),x={msTransform:N,WebkitTransform:N,transform:N},I="number"===typeof s?{lineHeight:"".concat(s,"px")}:{};k=p.createElement("span",{className:"".concat(w,"-string"),ref:function(t){return e.avatarChildren=t},style:E(E({},I),x)},k)}else{k=p.createElement("span",{className:"".concat(w,"-string"),style:{opacity:0},ref:function(t){return e.avatarChildren=t}},k)}}return p.createElement("span",E({},b,{style:E(E({},C),b.style),className:P,ref:function(t){return e.avatarNode=t}}),k)},e}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){this.setScale(),this.setState({mounted:!0})}},{key:"componentDidUpdate",value:function(e){this.setScale(),e.src!==this.props.src&&this.setState({isImgExist:!0,scale:1})}},{key:"render",value:function(){return p.createElement(y.a,null,this.renderAvatar)}}])&&j(a.prototype,n),r&&j(a,r),t}(p.Component);C.defaultProps={shape:"circle",size:"default"};var k=a(324),N=(a(202),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.userInfo;return console.log(e),f.a.createElement("div",{className:"info-card"},f.a.createElement("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer"},f.a.createElement(C,{src:e.avatar_url})),f.a.createElement("span",{className:"info-card-bio"},e.bio||"He/She says nothing."),f.a.createElement("div",{className:"info-card-tags"},f.a.createElement(k.a,{title:"followers",color:"#2db7f5"},f.a.createElement(m.a,{type:"user"}),"\xa0",e.followers||0),f.a.createElement(k.a,{title:"following",color:"#2db7f5"},f.a.createElement(m.a,{type:"user-add"}),"\xa0",e.following||0)),e.blog&&f.a.createElement(f.a.Fragment,null,f.a.createElement(m.a,{type:"dribbble"})," \xa0",f.a.createElement("a",{href:e.html_url,target:"_blank",rel:"noopener noreferrer"},e.blog)),e.email&&f.a.createElement("p",null,f.a.createElement(m.a,{type:"global"}),"\xa0",e.email),e.location&&f.a.createElement("p",null,f.a.createElement(m.a,{type:"environment",theme:"filled"}),"\xa0",e.location),e.company&&f.a.createElement("p",null,f.a.createElement(m.a,{type:"bank"}),"\xa0",e.company))}}]),t}(f.a.Component)),x=a(184),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={popoverContent:f.a.createElement(m.a,{type:"loading"})},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"onMouseOver",value:function(e,t){var a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(t),!t){n.next=6;break}return n.next=4,r.a.awrap(x.a.getInfo({username:e}));case 4:a=n.sent,this.setState({popoverContent:f.a.createElement(N,{userInfo:a})});case 6:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this.props,t=e.login,a=e.avatar_url,n=e.html_url;return f.a.createElement("li",{className:"item"},f.a.createElement(h.a,{bordered:!1},f.a.createElement(g.a,{content:this.state.popoverContent,title:t,mouseEnterDelay:.5,onVisibleChange:this.onMouseOver.bind(this,t)},f.a.createElement(h.a.Meta,{avatar:f.a.createElement(C,{src:a}),title:t})),f.a.createElement("p",{className:"description"},f.a.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"visit"))))}}]),t}(f.a.Component),M=a(36),W=a(180),D=(a(187),a(42));a.d(t,"a",(function(){return L}));var L=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1,list:[],pageParam:{page:1,per_page:10}},a.componentDidMount=function(){a.getList()},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getList",value:function(){var e,t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return this.setState({loading:!0,list:[]}),e=this.props.listMethod,a.next=4,r.a.awrap(e(Object(o.a)({},this.state.pageParam,{username:D.a.get("my_github_app_username")})));case 4:t=a.sent,this.setState({loading:!1,list:t});case 6:case"end":return a.stop()}}),null,this)}},{key:"onPageChange",value:function(e){"pre"===e?this.setState({pageParam:Object(o.a)({},this.state.pageParam,{page:this.state.pageParam.page-1})}):this.setState({pageParam:Object(o.a)({},this.state.pageParam,{page:this.state.pageParam.page+1})}),this.getList()}},{key:"render",value:function(){var e=this.state.list,t=f.a.createElement("div",null,e.length>0&&f.a.createElement("ul",{className:"list following-list"},e.map((function(e){return f.a.createElement(I,Object.assign({key:e.id},e))}))),0===e.length&&f.a.createElement(M.a,{image:M.a.PRESENTED_IMAGE_SIMPLE}),f.a.createElement("div",{className:"list-page"},f.a.createElement(W.a.Group,null,f.a.createElement(W.a,{onClick:this.onPageChange.bind(this,"pre"),disabled:this.state.pageParam.page<=0},f.a.createElement(m.a,{type:"arrow-left"})),f.a.createElement("span",{style:{fontSize:"10px"}},"\xa0",this.state.pageParam.page,"\xa0"),f.a.createElement(W.a,{onClick:this.onPageChange.bind(this,"next"),disabled:!e.length},f.a.createElement(m.a,{type:"arrow-right"})))));return f.a.createElement("div",{className:"repos"},this.state.loading?f.a.createElement(m.a,{type:"loading"}):t)}}]),t}(f.a.Component)},328:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f}));var n=a(81),r=a(82),o=a(84),c=a(83),i=a(85),s=a(0),l=a.n(s),u=a(204),p=a(184),f=function(e){function t(){return Object(n.a)(this,t),Object(o.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"followers"},l.a.createElement(u.a,{listMethod:p.a.getFollowers}))}}]),t}(l.a.Component)}}]);
//# sourceMappingURL=8.3ad016e0.chunk.js.map