{"version":3,"sources":["request/api.js","utils/util.js","pages/repos/components/detailCard/DetailCard.js","pages/repos/components/Item.js","pages/repos/List.js"],"names":["HOST","request","path","param","Promise","resolve","reject","fullUrl","parseTpl","serializeJson","client_id","client_secret","fetch","then","r","text","res","JSON","parse","catch","err","getUser","getRepos","getFollowing","getFollowers","getInfo","getRepoDetail","getEvents","template","context","replace","match","key","trim","json","Object","entries","map","item","join","cutStr","val","length","substr","InfoCard","message","success","detailInfo","this","props","className","title","description","homepage","type","href","target","rel","clone_url","onCopy","onCopied","color","language","watchers_count","stargazers_count","forks_count","format","created_at","updated_at","React","Component","Item","state","popoverContent","username","repo","visible","api","setState","name","html_url","owner","content","mouseEnterDelay","onVisibleChange","onMouseOver","bind","login","List","componentDidMount","getList","list","ls","get","data","concat","result","id","image","Empty","PRESENTED_IMAGE_SIMPLE"],"mappings":"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","file":"static/js/9.cf44a530.chunk.js","sourcesContent":["import { parseTpl, serializeJson } from '@/utils/util';\n\nconst HOST = 'https://api.github.com';\n\nfunction request(path, param) {\n    return new Promise((resolve, reject) => {\n        let fullUrl = parseTpl(HOST + path, param);\n        fullUrl = fullUrl + '?' + serializeJson({\n            ...param,\n            client_id: 'aa18248a5e12eca15a6f',\n            client_secret: '389eac9e777a6ced5127b45193640580174c426d'\n        })\n        fetch(fullUrl).then(r => r.text().then(res => {\n            resolve(JSON.parse(res));\n        })).catch(err => {\n            reject(err);\n        });\n    });\n}\n\nexport default {\n    getUser(param) {\n        return request('/users/{{username}}', param);\n    },\n\n    getRepos(param) {\n        return request('/users/{{username}}/repos', param);\n    },\n\n    getFollowing(param) {\n        return request('/users/{{username}}/following', param);\n    },\n\n    getFollowers(param) {\n        return request('/users/{{username}}/followers', param);\n    },\n\n    getInfo(param) {\n        return request('/users/{{username}}', param);\n    },\n\n    getRepoDetail(param) {\n        return request('/repos/{{username}}/{{repo}}', param);\n    },\n\n    getEvents(param) {\n        return request('/users/{{username}}/events', param);\n    }\n};","export const parseTpl = (template, context) => {\n    return template.replace(/\\{\\{(.*?)\\}\\}/g, (match, key) => context[key.trim()]);\n}\n\nexport const serializeJson = (json) => {\n    return Object.entries(json).map(item => {\n        return `${item[0]}=${item[1]}`\n    }).join('&')\n}\n\nexport const cutStr = (val, length = 30) => {\n    if (val && val.length > length) {\n        return `${val.substr(0, length)}...`;\n    }\n    return val;\n}","import React from 'react';\nimport {\n    Tag,\n    Icon,\n    message\n} from 'antd';\nimport { format } from 'timeago.js';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { cutStr} from '@utils/util';\nimport './detailCard.scss';\n\nexport default class InfoCard extends React.Component {\n    onCopied () {\n        message.success('copied to clipboard!');\n    }\n\n    render() {\n        const detailInfo = this.props.detailInfo;\n        return (\n            <div className=\"detail-card\">\n                <div className=\"info-card-bio\" title={detailInfo.description}>{cutStr(detailInfo.description) || 'It says nothing.'}</div>\n                {\n                    detailInfo.homepage &&\n                    <div>\n                        <Icon type=\"link\" /> &nbsp;\n                        <a href={detailInfo.homepage} target=\"_blank\" rel=\"noopener noreferrer\">{cutStr(detailInfo.homepage, 30)}</a>\n                    </div>\n                }\n                {\n                    detailInfo.clone_url &&\n                    <div>\n                        <CopyToClipboard text={detailInfo.clone_url}\n                            onCopy={() => this.onCopied()}>\n                            <div>\n                                <a href=\"void:0\">{cutStr(detailInfo.clone_url, 30)}</a>&nbsp;\n                                <Icon type=\"copy\" /> \n                            </div>\n                        </CopyToClipboard>\n                    </div>\n                }\n                <div className=\"detail-card-tags\">\n                    <Tag color=\"#2db7f5\"><Icon type=\"code\" /> {detailInfo.language}</Tag>\n                    <Tag color=\"#87d068\"><Icon type=\"eye\" /> {detailInfo.watchers_count}</Tag>\n                    <Tag color=\"#108ee9\"><Icon type=\"star\" /> {detailInfo.stargazers_count}</Tag>\n                    <Tag color=\"#f50\"><Icon type=\"fork\" /> {detailInfo.forks_count}</Tag>\n                </div>\n\n                <div>created: {format(detailInfo.created_at)}</div>\n                <div>updated: {format(detailInfo.updated_at)}</div> \n            </div>\n        )\n    }\n}\n","import React from 'react';\nimport { \n    Card,\n    Tag,\n    Icon,\n    Popover,\n} from 'antd';\nimport DetailCard from './detailCard/DetailCard';\nimport api from '@api';\nimport { cutStr } from '@utils/util';\n\nexport default class Item extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            popoverContent: <Icon type=\"loading\" />\n        }\n    }\n\n    async onMouseOver(username, repo, visible) {\n        if (visible) {\n            const detailInfo = await api.getRepoDetail({\n                username,\n                repo: repo\n            });\n            this.setState({\n                popoverContent: <DetailCard detailInfo={detailInfo} />\n            });\n        }\n    }\n\n    render() {\n        const {\n            name,\n            description,\n            language,\n            html_url,\n            watchers_count,\n            stargazers_count,\n            forks_count,\n            owner,\n        } = this.props;\n        return (\n            <li className=\"item\">\n                <Card title={name}>\n                    <Popover content={this.state.popoverContent} title={name} mouseEnterDelay={.5} onVisibleChange={this.onMouseOver.bind(this, owner.login, name)}>\n                        <p className=\"description\" title={description}>\n                            <a href={html_url} target=\"_blank\" rel=\"noopener noreferrer\">{cutStr(description)}</a>\n                        </p>\n                        <Tag color=\"#2db7f5\"><Icon type=\"code\" /> {language}</Tag>\n                        <Tag color=\"#87d068\"><Icon type=\"eye\" /> {watchers_count}</Tag>\n                        <Tag color=\"#108ee9\"><Icon type=\"star\" /> {stargazers_count}</Tag>\n                        <Tag color=\"#f50\"><Icon type=\"fork\" /> {forks_count}</Tag>\n                    </Popover>\n                </Card>\n            </li>\n        )\n    }\n}\n","\nimport React from 'react';\nimport Item from './components/Item';\nimport { Empty } from 'antd';\nimport api from '@api';\nimport '@style/pages/common.scss';\nimport { ls } from '@utils/localStorage';\n\nexport default class List extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            list: []\n        };\n    }\n\n    componentDidMount = () => {\n        this.getList();\n    }\n\n    async getList() {\n        const data = await api.getRepos({\n            username: ls.get('my_github_app_username')\n        });\n        this.setState({\n            list: this.state.list.concat(data)\n        });\n    }\n\n    render() {\n        const { list } = this.state;\n        let result = null;\n        if (list.length) {\n            result = <ul className=\"list repos-list\">\n                {\n                    list.map(item => (\n                        <Item key={item.id} {...item}></Item>\n                    ))\n                }\n            </ul>;\n        } else {\n            result = <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} />;\n        }\n        return (\n            <div className=\"repos\">\n                {result}\n            </div>\n        )\n    }\n}\n"],"sourceRoot":""}